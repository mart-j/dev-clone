(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{16:function(e,t,n){e.exports={post:"PostList_post__2oId6",author:"PostList_author__1QHFg",date:"PostList_date__18l2n",likeButton:"PostList_likeButton__3P3iE",heartIcon:"PostList_heartIcon__5GmYw",tagWrapper:"PostList_tagWrapper__2oRkY",tag:"PostList_tag__3HPQR",likeCount:"PostList_likeCount__3bWyV"}},18:function(e,t,n){e.exports={formContentWrapper:"RegisterForm_formContentWrapper__2f5c6",labelContentWrapper:"RegisterForm_labelContentWrapper__UkuVM",buttonWrapper:"RegisterForm_buttonWrapper__3wO0c",error:"RegisterForm_error__3fIXD"}},21:function(e,t,n){e.exports={formContentWrapper:"LoginForm_formContentWrapper__2WC-G",labelContentWrapper:"LoginForm_labelContentWrapper__FAccU",buttonWrapper:"LoginForm_buttonWrapper__pm9Is",error:"LoginForm_error__27l_v"}},29:function(e,t,n){e.exports={authOptions:"AuthOptions_authOptions__2wbAe",buttonWrapper:"AuthOptions_buttonWrapper__1RQ67"}},48:function(e,t,n){e.exports={button:"Button_button__Nfhxt",buttonSecondary:"Button_buttonSecondary__o2_zx"}},49:function(e,t,n){e.exports={logo:"Logo_logo__1XOJC"}},50:function(e,t,n){e.exports={header:"Header_header__1fCsm"}},54:function(e,t,n){},55:function(e,t,n){e.exports={input:"Input_input__25eHb"}},56:function(e,t,n){e.exports={label:"Label_label__dETEq"}},63:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(26),o=n.n(s),i=(n(63),n(19)),u=n(6),l=n(17),p=n(8),d=n.n(p),j=n(14),b=n(4),h=n(13),O=n.n(h),f=n(15),x=n(48),m=n.n(x),_=function(e){var t=e.label,n=void 0===t?"Submit":t,a=e.type,c=void 0===a?"button":a,s=e.priority,o=void 0===s?"button":s,i=e.clickHandler;return Object(r.jsx)("button",{className:m.a[o],onClick:i,type:c,children:n})},v=n(29),g=n.n(v),k="FETCH_USER",w={token:"",user:{email:"",_id:""}},C=function(e){return{type:k,payload:e}},y=function(){var e=Object(u.c)((function(e){return e.user.token})),t=Object(b.f)(),n=Object(u.b)();return Object(r.jsx)("div",{className:g.a.authOptions,children:e?Object(r.jsx)(_,{clickHandler:function(){n(C(w)),localStorage["x-auth-token"]="",t.push("/login")},label:"Sign out"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:g.a.buttonWrapper,children:Object(r.jsx)(_,{clickHandler:function(){return t.push("/login")},priority:"buttonSecondary",label:"Sign in"})}),Object(r.jsx)("div",{className:g.a.buttonWrapper,children:Object(r.jsx)(_,{clickHandler:function(){return t.push("/register")},label:"Create account"})})]})})},W=n(49),N=n.n(W),F=function(){var e=Object(b.f)();return Object(r.jsx)("div",{onClick:function(){return e.push("/")},className:N.a.logo,children:"MART"})},S=n(50),H=n.n(S),I=function(){return Object(r.jsx)("header",{className:H.a.header,children:Object(r.jsx)(f.Grid,{children:Object(r.jsxs)(f.Row,{middle:"xs",children:[Object(r.jsx)(f.Col,{xs:6,children:Object(r.jsx)(F,{})}),Object(r.jsx)(f.Col,{xs:6,children:Object(r.jsx)(y,{})})]})})})},L=n(51),P=n.n(L),R=n(52),E=n(53),T=n(16),q=n.n(T),D="https://dev-clone.herokuapp.com/",B={headers:{"x-auth-token":localStorage["x-auth-token"]}},M=function(e,t){return O.a.patch("".concat(D,"posts/like/").concat(e),null,{headers:{"x-auth-token":t}})},A="FETCH_POSTS",G="LIKE_POST",V=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat(D,"posts/all"),B);case 2:return n=e.sent,r=n.data,e.abrupt("return",t({type:A,payload:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(d.a.mark((function e(t,n,r,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n,a);case 2:return e.abrupt("return",t({type:G,id:n,userId:r}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(u.c)((function(e){return{posts:e.posts.sort((function(e,t){return new Date(t.date).valueOf()-new Date(e.date).valueOf()})),userID:e.user.user._id,token:e.user.token}})),t=e.posts,n=e.userID,a=e.token,c=Object(u.b)();return Object(r.jsx)("div",{children:t.map((function(e,t){return Object(r.jsxs)("div",{className:q.a.post,children:[Object(r.jsx)("div",{className:q.a.author,children:e.email}),Object(r.jsx)("div",{className:q.a.date,children:P()(e.date).format("MMM Do YY")}),Object(r.jsx)("h1",{children:e.title}),Object(r.jsx)("div",{className:q.a.tagWrapper,children:e.tags.map((function(e,t){return Object(r.jsx)("div",{className:q.a.tag,children:"#".concat(e)},"".concat(t))}))}),Object(r.jsxs)("button",{className:q.a.likeButton,onClick:function(){return t=e._id,void(n&&Y(c,t,n,a));var t},children:[Object(r.jsx)(R.a,{className:q.a.heartIcon,icon:E.a}),e.likes.length>0&&Object(r.jsx)("span",{className:q.a.likeCount,children:e.likes.length})]})]},e._id)}))})},Q=function(){return Object(r.jsx)(f.Grid,{children:Object(r.jsx)(f.Row,{children:Object(r.jsx)(f.Col,{mdOffset:2,md:8,xs:12,children:Object(r.jsx)(J,{})})})})},U=n(5),X=n(20),z=n(54),K=n.n(z),Z=function(e){var t=e.submitHandler,n=e.children,c=Object(a.useRef)(null);return Object(r.jsx)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),t&&t(),c.current.reset()},ref:c,className:K.a.form,children:n})},$=n(55),ee=n.n($),te=function(e){var t=e.id,n=void 0===t?"":t,a=e.type,c=void 0===a?"text":a,s=e.required,o=void 0!==s&&s,i=e.value,u=e.changeHandler;return Object(r.jsx)("input",{onChange:function(e){return u(e.target.value)},value:i,required:o,id:n,type:c,className:ee.a.input})},ne=n(56),re=n.n(ne),ae=function(e){var t=e.htmlFor,n=e.content;return Object(r.jsx)("label",{className:re.a.label,htmlFor:t,children:n})},ce=n(21),se=n.n(ce),oe=function(){var e=Object(a.useState)(""),t=Object(X.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)({email:"",password:""}),o=Object(X.a)(s,2),i=o[0],l=o[1],p=Object(u.b)(),h=Object(b.f)(),f=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("http://localhost:5000/users/login",i);case 3:t=e.sent,n=t.data,p(C(n)),localStorage["x-auth-token"]=n.token,l({email:"",password:""}),h.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),c(e.t0.response.data.message),setTimeout((function(){c("")}),4e3);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Z,{submitHandler:f,children:Object(r.jsxs)("div",{className:se.a.formContentWrapper,children:[Object(r.jsx)("h1",{children:"Welcome to Community"}),n&&Object(r.jsx)("div",{className:se.a.error,children:n}),Object(r.jsxs)("div",{className:se.a.labelContentWrapper,children:[Object(r.jsx)(ae,{htmlFor:"email",content:"Email"}),Object(r.jsx)(te,{changeHandler:function(e){return l(Object(U.a)(Object(U.a)({},i),{},{email:e}))},value:i.email,type:"email",id:"email",required:!0})]}),Object(r.jsxs)("div",{className:se.a.labelContentWrapper,children:[Object(r.jsx)(ae,{htmlFor:"password",content:"Password"}),Object(r.jsx)(te,{changeHandler:function(e){return l(Object(U.a)(Object(U.a)({},i),{},{password:e}))},value:i.password,type:"password",id:"password",required:!0})]}),Object(r.jsx)("div",{className:se.a.buttonWrapper,children:Object(r.jsx)(_,{type:"submit",label:"Sign in"})})]})})},ie=function(){return Object(r.jsx)(oe,{})},ue=n(18),le=n.n(ue),pe=function(){var e=Object(a.useState)({email:"",password:"",passwordCheck:""}),t=Object(X.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),o=Object(X.a)(s,2),i=o[0],l=o[1],p=Object(u.b)(),h=Object(b.f)(),f=function(){var e=Object(j.a)(d.a.mark((function e(){var t,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("http://localhost:5000/users/register",n);case 3:return t=n.email,r=n.password,e.next=6,O.a.post("http://localhost:5000/users/login",{email:t,password:r});case 6:a=e.sent,s=a.data,p(C(s)),localStorage["x-auth-token"]=s.token,c({email:"",password:"",passwordCheck:""}),h.push("/"),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),l(e.t0.response.data.message),setTimeout((function(){l("")}),4e3);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(Z,{submitHandler:f,children:Object(r.jsxs)("div",{className:le.a.formContentWrapper,children:[Object(r.jsx)("h1",{children:"Welcome to Community"}),i&&Object(r.jsx)("div",{className:le.a.error,children:i}),Object(r.jsxs)("div",{className:le.a.labelContentWrapper,children:[Object(r.jsx)(ae,{htmlFor:"email",content:"Email"}),Object(r.jsx)(te,{changeHandler:function(e){return c(Object(U.a)(Object(U.a)({},n),{},{email:e}))},value:n.email,type:"email",id:"email",required:!0})]}),Object(r.jsxs)("div",{className:le.a.labelContentWrapper,children:[Object(r.jsx)(ae,{htmlFor:"password",content:"Password"}),Object(r.jsx)(te,{changeHandler:function(e){return c(Object(U.a)(Object(U.a)({},n),{},{password:e}))},value:n.password,type:"password",id:"password",required:!0})]}),Object(r.jsxs)("div",{className:le.a.labelContentWrapper,children:[Object(r.jsx)(ae,{htmlFor:"passwordCheck",content:"Verify passwod"}),Object(r.jsx)(te,{changeHandler:function(e){return c(Object(U.a)(Object(U.a)({},n),{},{passwordCheck:e}))},value:n.passwordCheck,type:"password",id:"passwordCheck",required:!0})]}),Object(r.jsx)("div",{className:le.a.buttonWrapper,children:Object(r.jsx)(_,{type:"submit",label:"Register"})})]})})},de=function(){return Object(r.jsx)(pe,{})},je=function(){var e=Object(u.b)(),t=Object(b.f)(),n=Object(b.g)();Object(a.useEffect)((function(){V(e)}),[]);var c=function(){var r=Object(j.a)(d.a.mark((function r(){var a,c,s,o,i,u,l;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.pathname,c=localStorage["x-auth-token"]||"",s={headers:{"x-auth-token":c}},r.next=5,O.a.post("https://dev-clone.herokuapp.com/users/tokenIsValid",null,s);case 5:if(o=r.sent,!(i=o.data)||"/login"!==a&&"/register"!==a||t.push("/"),!i){r.next=14;break}return r.next=11,O.a.get("https://dev-clone.herokuapp.com/users",s);case 11:u=r.sent,l=u.data,e(C({token:c,user:l}));case 14:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(a.useEffect)((function(){c()}),[n.pathname]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(I,{}),Object(r.jsxs)(b.c,{children:[Object(r.jsx)(b.a,{path:"/login",children:Object(r.jsx)(ie,{})}),Object(r.jsx)(b.a,{path:"/register",children:Object(r.jsx)(de,{})}),Object(r.jsx)(b.a,{exact:!0,path:"/",children:Object(r.jsx)(Q,{})})]})]})},be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,95)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},Oe=n(57),fe=[],xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return t.payload;case G:var n=e.map((function(e){return e._id===t.id&&e.likes.includes(t.userId)?Object(U.a)(Object(U.a)({},e),{},{likes:e.likes.filter((function(e){return e!==t.userId}))}):e._id!==t.id||e.likes.includes(t.userId)?e:Object(U.a)(Object(U.a)({},e),{},{likes:[].concat(Object(Oe.a)(e.likes),[t.userId])})}));return n;default:return e}},me=Object(i.b)({user:he,posts:xe}),_e=Object(i.c)(me);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(u.a,{store:_e,children:Object(r.jsx)(l.a,{children:Object(r.jsx)(l.b,{basename:"/",children:Object(r.jsx)(je,{})})})})}),document.getElementById("root")),be()}},[[94,1,2]]]);
//# sourceMappingURL=main.d29db19e.chunk.js.map